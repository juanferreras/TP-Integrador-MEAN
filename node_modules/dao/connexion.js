var MongoClient = require('mongodb').MongoClient;
var config = require('dao/conf');
var _db;

module.exports.conectar = function (funcionCallback){
	if(_db){ 
		funcionCallback(_db);
	} else{
		console.log("Creando conexi√≥n MongoDB"); 
		var urlConn = process.env.MONGODB_URI || 'mongodb://'+config.servidor+':'+config.puerto+'/'+config.db;
		MongoClient.connect( urlConn, function(err, database) {
			if(err) throw err; 
			_db = database;
			funcionCallback(_db);
		});
	}	
}